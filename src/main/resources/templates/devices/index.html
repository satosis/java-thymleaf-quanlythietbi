<div th:include="/fragments/layout"></div>
<div class="wrapper">
    <div th:replace="/fragments/header :: header"></div>
    <div th:replace="/fragments/sidebar :: aside"></div>
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1 th:if="${@commonConfigurations?.currentUser?.role != 'USER'}">
                [[#{devices}]]
                <small><a th:href="@{'/devices/create'}" class="btn btn-primary">Thêm mới</a></small>
                <!-- <small><a th:href="@{'/devices/export'}" class="btn btn-primary">Export excel</a></small> -->
            </h1>
            <ol class="breadcrumb">
                <li><a th:href="@{'/devices'}" ><i class="fa fa-dashboard"></i> Trang chủ</a></li>
                <li class="active"> [[#{devices}]]</li>
            </ol>
        </section>

        <!-- Main content -->
        <section class="content">
            <div class="col-md-12">
            <div th:if="${message_error}" class="alert alert-danger mt-3">[[${message_error}]]</div>
            <div th:if="${message}" class="alert alert-success mt-3">[[${message}]]</div>
            <table class="table text-center">
                <thead>
                <tr>
                    <td>#</td>
                    <td>[[#{name}]]</td>
                    <td>[[#{avatar}]]</td>
                    <td>Category</td>
                    <td>Serial Number</td>
                    <td>Operational Status</td>
                    <td>Availability Status</td>
                    <td>Action</td>
                </tr>
                </thead>
                <tbody>
                <tr th:if="${devices.isEmpty()}">
                    <th colspan="9">[[#{no_result_found}]]</th>
                </tr>
                <tr th:each="device : ${devices}">
                    <td>[[${((currentPage - 1) * 10) + deviceStat.index + 1}]]</td>
                    <td>[[${device.name}]]</td>
                    <td><img th:src="${device.avatar}" th:alt="${device.name}" style="height: 50px;width: 50px" class="lazy"/></td>
                    <td>[[${device.category.name}]]</td>
                    <td>[[${device.serial_number}]]</td>
                    <td>[[${device.operational_status}]]</td>
                    <td>[[${device.availability_status}]]</td>
                    <td>
                        <a th:href="@{'/devices/request/' + ${device.id}}" class="btn btn-secondary" th:if="${device.availability_status == 'AVAILABLE'}"><i class="fa fa-edit"></i> Yêu cầu mượn</a>
                        <a th:href="@{'/devices/edit/' + ${device.id}}" class="btn btn-secondary"><i class="fa fa-edit"></i> [[#{edit}]]</a>
                        <a th:href="@{'/devices/delete/' + ${device.id}}" class="btn btn-secondary"><i class="fa fa-trash text-danger"></i> [[#{delete}]]</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="box-footer" th:include="/fragments/pagination">
        </div>
    </section>
    <!-- /.content -->
    </div>
    </div>
<!-- /.content-wrapper -->
<div th:include="/fragments/footer"></div>
